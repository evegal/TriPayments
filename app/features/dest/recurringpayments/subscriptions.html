<!--include ../modals/mock.html--><script type="text/ng-template" id="midCreateContent.html"><div class="midCreateEditModal midCreateModal"><div class="modal-header"><h3>Create New MID</h3><button type="button" ng-click="cancel()" class="close">X</button></div><div class="modal-body"><wizard on-finish="finishedWizard()"><wz-step title="1. Gateway Config"><div class="gateway-option"><label>Do you want to setup from your pre-existing gateways?</label><input tooltip="Re-use a gateway that you already configured" type="checkbox" ng-model="preExist"/></div><form name="midFormGatewayConfig" ng-if="preExist == false" novalidate="novalidate" class="midCreateModal stepOne"><div class="row"><div class="col-md-4"><label>*Choose Gateway Service:</label></div><div class="col-md-8"><select required="" ng-model="selectedMerchant" id="GatewayId" ng-options="obj.Id as obj.DisplayName for obj in gateways" tooltip="Select a gateway service from a list of available gateways  (Required)" tooltip-placement="top" class="form-control"><option value="">Select an item</option></select></div></div><div class="row"><div class="col-md-4"><label>*Processor:</label></div><div class="col-md-8"><select required="" ng-model="selectedPro" id="processorId" ng-options="obj.Id as obj.Name for obj in processors" tooltip="The name of the processor for this merchant account (Required)" tooltip-placement="top" class="form-control"><option value="">Select an item</option></select></div></div><div class="row"><div class="col-md-4"><label>*Merchant Company:</label></div><div class="col-md-8"><input required="" ng-model="MerchantCompany" id="MerchantCompany" type="text" placeholder="Enter Custom Group Name" tooltip="The name you want to associate with this gateway (Required)" tooltip-placement="top" class="form-control"/></div></div><div class="row"><div class="col-md-4"><label>*Gateway Username:</label></div><div class="col-md-8"><input required="" ng-model="UserNamegate" id="Merchant.UserNamegate" type="text" placeholder="Enter Custom User Name (Required)" autocomplete="off" class="form-control"/></div></div><div class="row"><div class="col-md-4"><label>*Gateway Password</label></div><div class="col-md-8"><input required="" ng-model="Passwordgate" id="Merchant.Passwordgate" type="password" placeholder="Enter Your Password (Required)" autocomplete="off" class="form-control"/></div></div><div class="row"><div class="col-md-4"><label>*Gateway Type</label></div><div class="col-md-8"><select tooltip="Choose the kind of payment processed by this gateway (Required)" tooltip-placement="top" id="GatewayType" class="form-control"><option value="CreditCard">Credit Card</option><option value="BankingAccount">Banking Account</option><option value="External">External</option></select></div></div><div class="row"><div class="col-md-4"><label>*Active</label></div><div class="col-md-8"><input ng-model="activeStatus" id="steponeActive" type="checkbox" checked="checked"/></div></div><div class="row"><div class="col-md-6 text-left"><a tooltip="Previous selection not available in first step" tooltip-placement="top" class="row_btn disabled_btn"><i class="fa fa-arrow-left"></i><span>Previous</span></a></div><div class="col-md-6 text-right"><a type="submit" value="Next" ng-click="midCreateGatewayConfig(midFormGatewayConfig,selectedMerchant,selectedPro)" class="row_btn emerald_btn"><span>Next</span><i class="fa fa-arrow-right"></i></a></div></div><div class="row errorMsg"><p>{{errorMsg}}</p></div></form><!-- Pre-Existing Group select--><form name="midFormPreExistGatewayConfig" ng-if="preExist == true" novalidate="novalidate" class="preExist"><div class="row"><div class="col-md-4"><label>*Pre-Existing Gateway</label></div><div class="col-md-8"><select required="" ng-model="currentGate" ng-change="selectUpdate(currentGate)" ng-options="obj.MerchantGatewayId as obj.DisplayName for obj in curGates" class="form-control"><option value="">Select an item (Required)</option></select></div></div><div ng-if="ChosenGateway.MerchantGatewayId != null" class="row"><div class="row"><div class="col-md-6 text-right">Merchant Gateway Id:</div><div class="col-md-6">{{ChosenGateway.MerchantGatewayId}}</div></div><div class="row"><div class="col-md-6 text-right">Company Name:</div><div class="col-md-6">{{ChosenGateway.CompanyName}}</div></div><div class="row"><div class="col-md-6 text-right">Active Status:</div><div class="col-md-6">{{ChosenGateway.Active}}</div></div><div class="row"><div class="col-md-6 text-right">Gateway User:</div><div class="col-md-6">{{ChosenGateway.GatewayUsername}}</div></div><div class="row"><div class="col-md-6 text-right">Gateway Password:</div><div class="col-md-6">{{ChosenGateway.GatewayPassword}}          </div></div></div><div class="row"><div class="col-md-6"></div><div class="col-md-6 text-right"><a href="" type="submit" ng-click="midPreExistGatewayConfig(midFormPreExistGatewayConfig)" class="row_btn emerald_btn"><span>Next</span><i class="fa fa-arrow-right"></i></a></div></div><div class="row errorMsg"><p>{{wrongUser}}</p><p>{{emptyField}}</p></div></form></wz-step><wz-step title="2. MID Config"><form name="midFormCreateConfigOptions" novalidate="novalidate" class="stepTwo"><div class="row"><div class="col-md-6"><div class="row"><div class="col-md-4"><label>*MID:</label></div><div class="col-md-8"> <input required="" ng-model="MIDconfig" id="MIDconfig" type="text" placeholder="Enter mid  (Required)" tooltip="MID or Processor ID is provided by your Merchant Account Provider (Required)" tooltip-placement="top" class="form-control"/></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-4"><label>*Descriptor:</label></div><div class="col-md-8"><input required="" ng-model="MIDdescriptor" id="MIDdescriptor" type="text" tooltip="Text available for order confirmation it's passed to the gateway.  If dynamic descriptor is supposed to be provided by gateway. (Required)" tooltip-placement="top" placeholder="Enter descriptor (Required)" class="form-control"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="row"><div class="col-md-4"><label>*Display Name:</label></div><div class="col-md-8"><input required="" ng-model="MIDdisplayName" id="MIDdisplayName" type="text" tooltip-placement="top" placeholder="Enter display name (Required)" tooltip="What will show in our reports to this Merchant Account (Required)" class="form-control"/></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-4"><label>*Monthly Cap:</label></div><div class="col-md-8"><input required="" ng-model="MIDmonthlyCap" type="number" id="MIDmonthlyCap" tooltip="Used for load balancing and routing to prevent transactions to decline because your account exceeds the cap.  (Required)" tooltip-placement="top" placeholder="Enter monthly cap  (Required)" class="form-control"/></div></div></div></div><div class="row paymentTypeDiv"><p> <label tooltip="Select allowed payment types.  (Required)" tooltip-placement="top">*Payment Types: (Required)</label></p></div><div class="row paymentTypeDiv"><div class="col-md-3"><input name="cardCheckbox" type="checkbox" value="1"/><i class="fa fa-cc-amex fa-2x"></i></div><div class="col-md-3"><input name="cardCheckbox" type="checkbox" value="2"/><i class="fa fa-cc-visa fa-2x"></i></div><div class="col-md-3"><input name="cardCheckbox" type="checkbox" value="3"/><i class="fa fa-cc-mastercard fa-2x"></i></div><div class="col-md-3"><input name="cardCheckbox" type="checkbox" value="4"/><i class="fa fa-cc-discover fa-2x"></i></div></div><div class="row paymentTypeDiv"><p> <label tooltip="Select allowed currency types.  (Required)" tooltip-placement="top">*Currency Types: (Required)</label></p></div><div class="row currencyTypeDiv"><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="12"/><span>USD - United States Dollar</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="3"/><span>AUD - Australia Dollar</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="10"/><span>BRL -Brazil Real</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="4"/><span>CAD - Canada Dollar</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="5"/><span>DKK - Denmark Krone</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="2"/><span>EUR -Euro Member </span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="1"/><span>GBP - UK Pound</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="7"/><span>JPY - Japan Yen</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="8"/><span>NOK - Norway Krone</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="6"/><span>NZD - New Zealand Dollar</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="9"/><span>SEK - Sweden Krona</span></div><div class="col-md-3"><input name="curTypeCheckbox" type="checkbox" value="11"/><span>SGD - Singapore Dollar</span></div></div><div class="row paymentTypeDiv"><p> <label tooltip="Select additional MID options.  (Optional)" tooltip-placement="top">Additional MID Options: (Optional)</label></p></div><div class="row"><div class="col-md-6"><div class="row"><div class="col-md-6"><label>Daily ReBill Limit:</label></div><div class="col-md-3"><select tooltip="Rebill limit set to percent or amount (optional)" tooltip-placement="top" id="limitType" class="form-control"><option value="Percentage">%</option><option value="Amount">Amt</option></select></div><div class="col-md-3"><input id="dailyRebill" type="number" placeholder="value" class="form-control"/></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-6"><label>Transaction Fee:</label></div><div class="col-md-6"><input tooltip="Transaction Fee charged by your Merchant Account provider.  Used for reporting.  (optional)" tooltip-placement="top" type="number" id="MIDtransactionFee" placeholder="Enter transaction fee" class="form-control"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="row"><div class="col-md-6"><label>ChargeBack Fee:</label></div><div class="col-md-6"><input id="MIDchargeBackFee" placeholder="Enter chargeback fee" tooltip="Used for reporting" tooltip-placement="top" type="number" class="form-control"/></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-6"><label>Reserve Acct Rate:</label></div><div class="col-md-6"><input tooltip="Used for reporting assing in estimating cash flow. (optional)" tooltip-placement="top" type="number" id="MIDreserveAccountRate" placeholder="Enter reserve rate" class="form-control"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="row"><div class="col-md-6"><label>Discount:</label></div><div class="col-md-6"><input tooltip="Used for reporting. (optional)" tooltip-placement="top" type="number" id="MIDiscount" placeholder="Enter discount" class="form-control"/></div></div></div><div class="col-md-6"><div class="row"><div class="col-md-6"><label>Gateway Fee:</label></div><div class="col-md-6"><input id="MIDgatewayFee" type="number" tooltip="Used for reporting (optional)" tooltip-placement="top" placeholder="Enter gateway fee" class="form-control"/></div></div></div></div><div class="row"><div class="col-md-6 text-left"><a href="" type="submit" wz-previous="" class="row_btn emerald_btn"><i class="fa fa-arrow-left"></i><span>Previous</span></a></div><div class="col-md-6 text-right"><a href="" type="submit" ng-click="midCreateConfigOptions(midFormCreateConfigOptions)" class="row_btn emerald_btn"><span>Next</span><i class="fa fa-arrow-right"></i></a></div></div><div class="row errorMsg"><p>{{errorMsg}}</p></div></form></wz-step><wz-step title="3. Email Notification"><div class="row"><form><!--.col-md-4p Email Type
.form-group
    input(id="allEmailTypes" ng-model="allEmailTypes" ng-change="allTypeChange()" value="1" type="checkbox" )
    label All Email Types
.form-group
    input(id="transaction" ng-model="transaction" value="2" type="checkbox")
    label Transaction
.form-group
    input(id="capToggle" ng-model="capToggle" value="3" type="checkbox")
    label Cap Utilization

.row(ng-if="capToggle == true")
    .col-md-6
        select.form-control(id="capType")
            option(value="") Select an item
            option Percentage
            option Amount
    .col-md-6
        input.form-control(id="capValue" type="number" placeholder="Enter Value") 



--><div class="col-md-8"><p>Email Address</p><input type="text" placeholder="Enter Your Email (optional)" id="notificationEmail" class="form-control"/></div><div class="col-md-2"><a href="" ng-click="addEmail()" class="row_btn emerald_btn add_email"> <i class="fa fa-plus"></i><span>Add Email</span></a></div></form></div><div class="row"><table class="table"><thead ng-if="emailAdded == true"><tr><th>Email</th><th>Remove Notification</th></tr></thead><tbody ng-repeat="email in emails"><tr><td>{{email}}</td><td><a href="" ng-click="removeEmail(email, $index)" class="mdl_body_btn alazarin_btn"><i class="fa fa-trash"></i><span>Delete</span></a></td></tr></tbody></table></div><div class="row"><div class="col-md-6 text-left"><a href="" type="submit" wz-previous="" class="row_btn emerald_btn"><i class="fa fa-arrow-left"></i><span>Previous</span></a></div><div class="col-md-6 text-right"><a href="" type="submit" ng-click="midCreateNotifyEmail()" class="row_btn emerald_btn"><span>Next</span><i class="fa fa-arrow-right"></i></a></div></div><div class="row errorMsg"><p>{{errorMsg}}</p></div></wz-step><wz-step title="4. Verify Settings(VT)" class="virtual_panel"><table class="table"><thead><tr><th>MID</th><th>Descriptor</th><th>Display Name</th><th>Monthly Cap</th><th>Active Status</th></tr></thead><tbody><tr><td>{{MidConfig}}</td><td>{{Descriptor}}</td><td>{{DisplayName}}</td><td>{{MonthlyCap | currency}}</td><td>{{IsActive}}</td></tr></tbody></table><div class="row"><div class="col-md-6 text-left"><a href="" type="submit" wz-previous="" class="row_btn emerald_btn final_btn"><i class="fa fa-arrow-left"></i><span>Previous</span></a></div><div class="col-md-6 text-right"><a href="" type="submit" ng-click="midCreateVerify()" class="row_btn emerald_btn final_btn"><span>Verify MID</span><i class="fa fa-arrow-right"></i></a></div></div><div class="row errorMsg"><p>{{errorMsg}}</p></div><div class="row successMsg"><p>{{successMsg}}</p></div></wz-step></wizard></div><div class="modal-footer action_group"><a href="" ng-click="cancel()" class="row_btn cancel_btn"><i class="fa fa-sign-out"></i><span>Exit</span></a></div></div></script><script type="text/ng-template" id="midsModalContent.html">
<div class="modal-header">
	<h3 class="modal-title"><span class="subtle">Edit MID: </span>{{mid.DisplayName}}</h3>
	<button type="button" class="close" ng-click="cancel()">x</button>
</div>

<div class="modal-body">
	
	<table class="table ng-table-responsive">
		<thead>
			<tr>
				<th style="width:20%">MID Name</th>
				<th style="width:20%">Rollover MID</th>
				<th style="width:20%">Monthly Cap</th>
				<th style="width:20%">Cap Threshold</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					<span>{{mid.DisplayName}}</span>
				</td>
				<td>
					<span editable-select="mid.RolloverMidId" e-name="RolloverMidId" e-form="rowform" e-ng-options="obj.DisplayName as obj.DisplayName for obj in rollOvers">{{mid.DisplayName}}</span>
				</td>
				<td>
					<span editable-select="mid.MonthlyCap" e-name="MonthlyCap" e-form="rowform" e-ng-options="obj.value as obj.value for obj in CapValues">{{mid.MonthlyCap}}</span>
				</td>
				<td>{{mid.CapUtilizationPercentage}}</td>
				
			</tr>
		</tbody>

	</table>

</div>

<div class="userCreateSuccess">
        <p>Merchant Account Updated</p>

</div>


<div class="modal-footer action_group">
	<form editable-form name="rowform" onbeforesave="saveUpdate($data,mid.Id)" ng-show='rowform.$visible', shown='inserted == mid'>
        <button class="create_btn" type="submit" ng-disabled="rowform.$waiting">Save</button>
        <a class="cancel_btn" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()">Cancel</a>
    </form>


    <div class="action_group" ng-show='!rowform.$visible'>
        <a class="modal_edit" ng-click="rowform.$show()">Edit</a>
        <button class="cancel_btn" ng-click="cancel()">Exit</button>                      
    </div>
</div>


</script>
<!--
<script type="text/ng-template" id="midsModalContent.html">
<div class="modal-header">
	<h3 class="modal-title"><span class="subtle">MIDs for</span> {{merchantName}} <span class="subtle">/ {{merchantId}}</span></h3>
    <button type="button" class="close" ng-click="cancel()">x</button>
</div>

<div class="modal-body">

	<table class="table ng-table-responsive">
		<thead>
			<tr>
				<th style="width:30%">MID Name</th>
				<th style="width:25%">Rollover MID</th>
				<th style="width:15%">Monthly Cap</th>
				<th style="width:20%">Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="mid in mids">
				
				<td>
					<span editable-select="mid.Id" e-name="Id" e-form="rowform" e-ng-options="obj.Id as obj.DisplayName for obj in availableMIDS">
						{{mid.DisplayName || addedMID}}
						
					</span>
				</td>	
				<td>
					<span editable-select="mid.RolloverMidId" e-name="RolloverMidId" e-form="rowform" e-ng-options="obj.Id as obj.DisplayName for obj in rollOvers">
						{{mid.DisplayName}}
					</span>
				</td>
				<td>
					 field not editable <span editable-select="mid.CapUtilizationPercentage" e-name="mid.CapUtilizationPercentage" e-form="rowform" e-ng-options="obj.value as obj.value for obj in CapValues"></span>
						 {{mid.CapUtilizationPercentage}}%
				</td>
				<td style="white-space:nowrap">
					
					<form editable-form name="rowform" onbeforesave="saveMID($data,mid.DisplayName)" ng-show='rowform.$visible', shown='inserted == mid'>
						<button class="mid_save" type="submit" ng-disabled="rowform.$waiting">Save</button>
						<a href="" class="mid_cancel" ng-click="rowform.$cancel()">Cancel</a>
					</form>

					<div class="action_group" ng-show='!rowform.$visible'>
						<button class="merchant_edit" ng-click="rowform.$show()">Edit</button>
						<button class="remove_btn" ng-click="removeMID(mid.Id,mid.DisplayName,$index)">Remove</button>
					</div>

				</td>
			</tr>
		</tbody>
	</table>

	<div class="MID_feedback">
	    <p class="p-title">Are You Sure You Want To Remove</p>
	    <h3>{{activeName}}</h3>
	    <a href="" class="confirm_btn" ng-click="confirmMIDDelete(mid.Id)">Confirm</a>
	</div>

	<div class="nameError">
            <p>No Available MIDS</p>
    </div>

	<div class="userCreateSuccess2">
		<p>MID Added</p>
	</div>

	<div class="userCreateSuccess">
		<p>MID Removed</p>
	</div>

</div>

<div class="modal-footer">
	<a href="" class="create_btn" ng-click="addMID()">Add MIDs</a>
    <a href="" class="cancel_btn" ng-click="cancel()">Exit</a>
</div>


</script>
-->
<script type="text/ng-template" id="addMIDSContent.html">
<div class="modal-header">
    <h3 class="modal-title"><span class="subtle">Add MIDS To:</span> {{groupName}}</h3>
    <button type="button" class="close" ng-click="cancel()">x</button>
</div>
<div class="modal-body">
    
    <form name="addMIDform" ng-submit="ok()" novalidate>

        <div class="row">
            
            <table class="table">
                <thead>
                    <tr>
                        <th style="width:50%">Available MIDS</th>
                        <th style="width:50%">Actions</th>
                    </tr>
                 </thead>
                 <tbody>
                    <tr ng-repeat="mid in availableMIDS">
                        <td>{{mid.DisplayName}}</td>
                        <td class="action_group">
                            <a class="row_btn emerald_btn" href="" ng-click="addMID($index,mid)"><i class="fa fa-plus"></i><span>Add MID</span></a>
                        <td>
                    </tr>

                 </tbody>
            </table>
            
            <!--
            <table class="table">
                <thead>
                    <tr>
                        <th style="width:50%">Available MIDS</th>
                        <th style="width:50%">Actions</th>
                    </tr>
                 </thead>
                 <tbody>
                    <tr ng-repeat="flagged in flaggedMIDS">
                        <td>{{flagged.DisplayName}}</td>
                        <td class="action_group">
                            <a class="modal_edit" href="" ng-click="unFlagMID($index,mid)">Remove MID</a>
                        <td>
                    </tr>
                 </tbody>
            </table>
            -->
           
        </div>

    </form>

</div>

<div class="userCreateSuccess">
        <p>Success</p>
</div>

<div class="modal-footer action_group">
    <a href="" class="row_btn peter_river_btn" ng-click="cancel()"><i class="fa fa-sign-out"></i><span>Exit</span></a>
</div>

</script><script type="text/ng-template" id="midsConfirmModalContent.html">
<div class="modal-header">
    <h3 class="modal-title"><span class="subtle">Remove MID: </span> {{mid.DisplayName}}</h3>
    <button type="button" class="close" ng-click="cancel()">x</button>
</div>
<div class="modal-body">
    <p class="text-center">Are you sure you want to remove?</p>
    <h2 class="text-center">{{mid.DisplayName}}</h2>
</div>

<div class="userCreateSuccess">
    <p>MID Successfully Remove</p>
</div>

<div class="modal-footer action_group">
    <a href="" class="cancel_btn" ng-click="removeMID($index,mid)">Confirm</a>
    <a href="" class="cancel_btn" ng-click="cancel()">Exit</a>
</div>

</script><script type="text/ng-template" id="merchantRemoveContent.html">
	
	<div class="modal-header">
		<h3 class="modal-title"><span class="subtle">Remove MID Group: </span> {{merchant.Name}}</h3>
	    <button type="button" class="close" ng-click="cancel()">x</button>
	 </div>

		<div class="modal-body">
		    <p class="text-center">Are you sure you want to remove?</p>
		    <h2 class="text-center">{{merchant.Name}}</h2>
		</div>

		<div class="userCreateSuccess">
		    <p>Merchant Successfully Remove</p>
		</div>

	<div class="modal-footer action_group">
	    <a href="" class="row_btn alazarin_btn margin-right" ng-click="removeGroup()"><i class="fa fa-trash"></i><span>Confirm</span></a>
	    <a href="" class="row_btn peter_river_btn" ng-click="cancel()"><i class="fa fa-sign-out"></i><span>Exit</span></a>
	</div>

</script><script type="text/ng-template" id="merchantCreateContent.html"><div class="modal-header"><h3 class="modal-title subtle"><span class="subtle">Create Merchant Group</span></h3><button type="button" ng-click="cancel()" class="close">x</button></div><div class="modal-body"><form name="merchantCreateForm" ng-submit="ok()" novalidate="novalidate" class="merchantCreateForm"><div class="row"><div class="col-md-6"><p>Merchant Name</p><input type="text" placeholder="Enter Custom Group Name" id="merchantGroupName" class="form-control"/></div><div class="col-md-6"><p>Currency</p><!--select.form-control(ng-options="item.Id as item.Name for item in currencies" ng-model="Currency")--><select id="Currency" class="form-control"><option>Select A Currency</option><option value="0">USD</option><option value="3">AUD</option><option value="4">CAD</option><option value="5">DKK</option><option value="2">EUR</option><option value="1">GBP</option><option value="7">JPY</option><option value="8">NOK</option><option value="6">NZD</option><option value="9">SEK</option><option value="6">NZD</option><option value="11">SGD</option></select></div></div><div class="row"><div class="col-md-6"><p>Balancing Type</p><select id="BalancingType" class="form-control"><option value="0">None</option><option value="1">Cap</option><option value="2">Priority</option></select></div><div class="col-md-6"><p>Email For Notification</p><input type="text" placeholder="Enter Emails" id="MerchantEmail" class="form-control"/></div></div><div class="merchant_feedback"><p class="p-title">Confirm New Merchant Details</p><a type="submit" ng-click="ok()" class="save_btn">Save</a></div><div class="userCreateSuccess"><p>Merchant Account Created</p></div></form><div class="nameError"><p>{{createErrorMsg}}</p></div></div><div class="modal-footer"><a ng-click="submitUserCreate()"><i class="fa fa-plus"></i><span>Create</span></a><a ng-click="cancel()"><i class="fa fa-sign-out"></i><span>Exit</span></a></div></script><script type="text/ng-template" id="merchantEditContent.html"><div class="merchantEditModal"></div><div class="modal-header"><h3 class="modal-title"><span class="subtle">Edit Group Account</span><span>{{merchant.Name}}</span></h3><button type="button" ng-click="cancel()" class="close">x</button></div><div class="modal-body"><!--.row.col-md-6
	p MID Group Name
	input.form-control(ng-model="merchant.Name")
.col-md-5
	p Email for Notification
	input.form-control(ng-model="merchant.CapLimitNotificationEmails")--><form name="merchantEditForm" class="form"><table class="table"><thead><tr><th>MID Group Name</th><th>Email For Notification</th><th>Balancing Type</th><th>Currency</th></tr></thead><tbody><tr><td><input ng-model="merchant.Name" class="form-control"/></td><td><input ng-model="merchant.CapLimitNotificationEmails" class="form-control"/></td><td><select ng-model="merchant.BalancingType" ng-options="item.BalancingTypeId as item.BalancingType for item in BalancingTypes" class="form-control"></select></td><td><select ng-options="item.Id as item.Name for item in currencies" ng-model="merchant.Currency" class="form-control"></select></td></tr></tbody></table></form></div><div class="userCreateSuccess"><p>Merchant Account Updated</p></div><div class="modal-footer"><a ng-show="merchantEditForm.$dirty" type="submit" ng-click="updateMerchant(merchant)" class="modal_edit">Save</a><a ng-click="cancel()" class="cancel_btn">Exit</a></div></script><!--createSubscriptionModalCtrl--><div class="row"><h1>Recurring Payments - Subscriptions</h1></div><div class="merchant_view"><div class="panel panel-default"><div class="panel-heading"><div class="row"><div class="col-md-6"><h2 class="panel-title"><i class="fa fa-icon"></i>Subscriptions : {{subscriptionCount}}</h2></div><div class="col-md-6"><a href="" ng-csv="subscriptionsCSV" filename="subscribersExport.csv" ng-if="subscriptionCount != 0" class="def_btn wet_asphalt_btn float-right"><i class="fa fa-file-excel-o"> </i><span>Excel Export</span></a><a href="" ng-click="open()" ng-controller="midCreateModal" class="def_btn emerald_btn float-right margin-right"> <i class="fa fa-plus"></i><span>Create Subscription</span></a></div></div></div><div class="panel-body"><h3 ng-if="subscriptionCount == 0" class="noResults">{{'There are currently no subscriptions setup.'}} </h3><accordion ng-if="subscriptionCount != 0"><table st-table="displaySubscriptions" st-safe-src="subscriptionsOriginal" class="table ng-table-responsive table-striped"><thead><tr><th colspan="6"><input st-search="" type="search" placeholder="Filter through all subscriptions" class="form-control"/></th><tr><th st-sort="subscription.DisplayName" width="20%" class="st-header">Name</th><th st-sort="" width="10%" class="st-header">Recurring Type</th><th st-sort="" width="5%" class="st-header">Day</th><th st-sort="" width="5%" class="st-header">Amount</th><th st-sort="" width="10%" class="st-header">Next Invoice Date</th><th width="30%" class="st-header-nosort">Actions </th></tr></tr></thead><tbody ng-repeat="subscription in displaySubscriptions"><tr id="base{{$index}}"><td>{{subscription.DisplayName}}</td><td>Calendar date</td><td>test</td><!--td {{subscription.DaysInBillingCycle}}--><td>{{subscription.Amount | currency}}</td><td>{{subscription.NextBillingDate | date:'MM/dd/yyyy'}}</td><td><a href="" ng-click="openMID(merchant); loadMIDS(merchant.Id,merchant); checkWindow(shownMerchants)" ng-controller="addMIDSmodalCtrl" class="row_btn emerald_btn margin-right"><i class="fa fa-plus"></i><span>Add Subscribers</span></a><a href="" ng-click="loadMIDS(merchant.Id,merchant); gotoMID($index,shownMerchants)" class="row_btn wet_asphalt_btn margin-right"><i class="fa fa-eye"></i><span>View Subscribers</span></a><a ng-click="open(merchant)" ng-controller="editMerchantModalCtrl" class="row_btn turquoise_btn margin-right"> <i class="fa fa-edit"></i><span>Edit Subscription</span></a><a ng-click="open($index,merchant)" ng-controller="removeMerchantModalCtrl" class="row_btn alazarin_btn"> <i class="fa fa-trash"> </i><span>Delete Subscription</span></a></td><td class="hidden_td"><tr><td colspan="6" class="pushToggle"><accordion-group heading="" ng-click="loadMIDS(merchant.Id,merchant)" is-open="merchant.open"><table class="table table-striped"><thead><tr><th>MID Name</th><th>Rollover MID</th><th>Monthly Cap</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="mid in mids"><td>{{mid.DisplayName}}</td><td>{{mid.RolloverMidName}}</td><td>{{mid.MonthlyCap}}</td><td> <a ng-click="openIt(mid)" ng-controller="midsModalCtrl" class="row_btn turquoise_btn margin-right"> <i class="fa fa-edit"></i><span>Edit</span></a><a ng-click="openMID($index,mid)" ng-controller="midsConfirmModalCtrl" class="row_btn alazarin_btn margin-right"> <i class="fa fa-trash"></i><span>Remove</span></a></td></tr></tbody></table></accordion-group></td></tr></td></tr></tbody></table></accordion></div></div></div><!--.rowh1 Recurring Payments - Subscriptions--><!--.merchant_view.panel.panel-default
  .panel-heading
    .row
          .col-md-6
            h2.panel-title
              i.fa.fa-icon
              | Subscriptions
          .col-md-6
              a.def_btn.wet_asphalt_btn.float-right(href="" ng-csv='groupCSV' filename="groupExport.csv" ng-if="groupAmount != 0")
                i.fa.fa-file-excel-o 
                span Excel Export
              a.def_btn.emerald_btn.float-right.margin-right(href="" ng-click="open()" ng-controller="createMerchantModalCtrl") 
                i.fa.fa-plus
                span Create MID Group
  .panel-body
    h3.noResults(ng-if="groupAmount == 0") {{'There are currently no MID groups setup for this account.'}} 
    accordion(ng-if="groupAmount != 0")
      table.table.ng-table-responsive.table-striped(st-table="shownMerchants" st-safe-src="groupsBulk")
           thead
             tr
               th(colspan="7")
                 input.form-control(st-search="" type="search" placeholder="Filter through all MID groups")
               tr
                 th.st-header(st-sort="Name") Merchant Name
                 th.st-header(st-sort="BalancingType") Balancing Type
                 //th.st-header(st-sort="CapLimitNotificationEmails" style="width:15%") Cap Limit Notification Email
                 th.st-header(st-sort="Currency.Name") Currency Name
                 th.st-header-nosort(style="width:25%" colspan="2") Actions
            
           tbody(ng-repeat="merchant in shownMerchants")


             tr(id="base{{$index}}")
               td {{merchant.Name}}
               td {{merchant.BalancingType}}
               //td {{merchant.CapLimitNotificationEmails}}
               td {{merchant.Currency.Name}}
               td
                 a.row_btn.emerald_btn.margin-right(href="" ng-click="openMID(merchant); loadMIDS(merchant.Id,merchant); checkWindow(shownMerchants)" ng-controller="addMIDSmodalCtrl")
                    i.fa.fa-plus
                    span Add MIDs
                 a.row_btn.wet_asphalt_btn.margin-right(href="" ng-click="loadMIDS(merchant.Id,merchant); gotoMID($index,shownMerchants)")
                    i.fa.fa-eye
                    span Mids
                 a.row_btn.turquoise_btn.margin-right(ng-click="open(merchant)" ng-controller="editMerchantModalCtrl") 
                    i.fa.fa-edit
                    span Edit
                 a.row_btn.alazarin_btn(ng-click="open($index,merchant)" ng-controller="removeMerchantModalCtrl") 
                    i.fa.fa-trash
                    span Delete
               td.hidden_td
                  tr
                    td.pushToggle(colspan="6")
                      accordion-group(heading="" ng-click="loadMIDS(merchant.Id,merchant)" is-open="merchant.open")
                        table.table.table-striped
                          thead
                            tr
                              th MID Name
                              th Rollover MID
                              th Monthly Cap
                              th Actions

                          tbody
                            tr(ng-repeat="mid in mids")
                              td {{mid.DisplayName}}
                              td {{mid.RolloverMidName}}
                              td {{mid.MonthlyCap}}
                              td 
                                  a.row_btn.turquoise_btn.margin-right(ng-click="openIt(mid)" ng-controller="midsModalCtrl") 
                                    i.fa.fa-edit
                                    span Edit
                                  a.row_btn.alazarin_btn.margin-right(ng-click="openMID($index,mid)" ng-controller="midsConfirmModalCtrl") 
                                    i.fa.fa-trash
                                    span Remove-->